<h4>Add a new quiz</h4>
<form *ngIf="addQuizForm && quiz" #theForm="ngForm" [formGroup]="addQuizForm">
    <div class="form-group">
        <label class="input-label-small" for="title">Title</label>
        <input [style.border]="getBorderStyle(title)" [(ngModel)]="quiz.title" name="title" class="form-control" formControlName="title">

        <div *ngIf="isInputValidationFailed(title)" class="validation-err-container">
            <div *ngIf="title.errors.required">
                Title is required.
            </div>
            <div *ngIf="title.errors.minlength">
                Title must be at least {{ title.errors.minlength.requiredLength }} characters long.
            </div>
        </div>
    </div>

    <div class="form-group">
        <label class="input-label-small" for="description">Description</label>
        <input [style.border]="getBorderStyle(title)" [(ngModel)]="quiz.description" name="description" class="form-control" formControlName="description" />

        <div *ngIf="isInputValidationFailed(description)" class="validation-err-container">
            <div *ngIf="description.errors.required">
                Description is required.
            </div>
            <div *ngIf="description.errors.minlength">
                Description must be at least {{ description.minlength.requiredLength }} characters long.
            </div>
        </div>
    </div>


    <mat-checkbox [checked]="quiz.isPublic" (change)="publicChanged($event.checked)">Show in public</mat-checkbox>
    <div *ngIf="!quiz.isPublic">
        <ng-multiselect-dropdown [placeholder]="'Assign quiz to ...'" [data]="users" [(ngModel)]="selectedUsers"
            [ngModelOptions]="{standalone: true}" [settings]="dropdownSettings">
        </ng-multiselect-dropdown>
    </div>

    <hr />


    <div class="add-input-container">
        <input #answerInput type="text" placeholder="Add answer" aria-label="Add answer">
        <span class="btn secondary-button" (click)="addAnswer(answerInput.value)">Add</span>
    </div>

    <mat-list>
        <h3 mat-subheader>Answers</h3>
        <mat-list-item *ngFor="let answer of quiz.answers">
            <div class="quiz-answer-list-item" (click)="setCorrect(answer)">
                <div class="action-btn" *ngIf="answer.isCorrect;else not_correct">
                    <mat-icon mat-list-icon>done</mat-icon>
                </div>

                <ng-template class="action-btn" #not_correct>
                    <mat-icon mat-list-icon>arrow_forward_ios</mat-icon>
                </ng-template>
                
                <p class="answer-content">{{answer.content}}</p>

                <mat-icon class="action-btn" (click)="deleteAnswer(answer)" svgIcon="delete"></mat-icon>
            </div>
        </mat-list-item>
        <mat-divider></mat-divider>
    </mat-list>

    <br />
    <hr />

    <button id="cancel-btn" class="btn btn-default" mat-dialog-close>Cancel</button>

    <button id="add-quiz-btn" class="btn btn-primary" [disabled]="!theForm.valid" (click)="addQuiz()">
        Add quiz
    </button>
</form>